<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>py.Disk: Package description</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">py.Disk
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Package description </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Summary of functionality</h1>
<p>The Disk API is fairly big and provides:</p>
<ul>
<li>Abstracted Path objects for files and folders</li>
<li>Abstracted File object</li>
<li>Temporary files and folders</li>
<li>A better walk() function for getting files/subfolders inside a folder</li>
<li>Remote disk objects that work over SSH</li>
<li><b>One unified API for all of the above</b></li>
<li>An improved ZipFile class</li>
<li>A configuration file parser for modifying config files with key+value pairs</li>
</ul>
<h1>Detailed functionality</h1>
<h2>Representing file and folder paths</h2>
<pre class="fragment">from Disk import Local
filePath = Local.FilePath("path/to/file.txt")
folderPath = Local.FolderPath("path/to/local/folder")
</pre><p><code>FilePath</code> instances have methods similar to what is available in python's built in <code>os.path</code>, except that the first argument of all methods in <code>os.path</code> is not needed because functions in <code>os.path</code> are not attached to a class instance, whereas functions belonging to a <code>FilePath</code> class are. (This is similar to the move from all string functions being stored in the <code>string</code> module to becoming methods of string objects.) For example, to get the <code>dirname</code> of a path, do: </p>
<pre class="fragment">folderPath = filePath.dirname()
</pre><p><code>folderPath</code> will be an instance of <code>Disk.Local.FolderPath</code>.</p>
<p>90% of functions available in <code>os.path</code> are identically implemented as object methods in FilePath and FolderPath. In addition, some additional functions (many from <code>shutil</code>) are also available:</p>
<ul>
<li>For both <code>FilePath</code> and <code>FolderPath</code> objects:<ul>
<li><code>splitAll()</code> - Splits each path component (folder/filename) up, returning them all<ul>
<li>Examples (Assume <code>FolderPath</code> means <code>Disk.Local.FolderPath</code> or an instance thereof, and similarly with <code>FilePath</code>):<ul>
<li><code>FolderPath("/foo/bar").splitAll()</code> returns <code>[FolderPath("/"), FolderPath("foo"), FolderPath("bar")]</code></li>
<li><code>FolderPath("/foo/bar/").splitAll()</code> returns <code>[FolderPath("/"), FolderPath("foo"), FolderPath("bar")]</code></li>
<li><code>FolderPath("foo/bar").splitAll()</code> returns <code>[FolderPath("foo"), FolderPath("bar")]</code></li>
<li><code>FolderPath("foo").splitAll()</code> returns <code>[FolderPath("foo")]</code></li>
<li><code>FilePath("/foo.txt").splitAll()</code> returns <code>[FolderPath("/"), FilePath("foo.txt")]</code></li>
<li><code>FilePath("foo/bar.txt").splitAll()</code> returns <code>[FolderPath("foo"), FilePath("bar.txt")]</code></li>
<li><code>FilePath("bar.txt").splitAll()</code> returns <code>[FilePath("bar.txt")]</code></li>
<li>etc.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>For <code>FilePath</code> objects:<ul>
<li><code>move(destinationFilePath)</code></li>
<li><code>rename(newFilename)</code></li>
<li><code>copy(destinationFilePath, shouldCopyDates)</code></li>
<li><code>create()</code> - Similar to <code>touch</code></li>
<li><code>isBinary()</code></li>
</ul>
</li>
<li>For <code>FolderPath</code> objects:<ul>
<li><code>copy(destinationFilePath)</code></li>
<li><code>remove(isRecursive)</code></li>
<li><code>mkdirs()</code>/<code>makedirs()</code> - Same as <code>os.path.makedirs</code></li>
<li><code>walk(...)</code> - See below</li>
</ul>
</li>
</ul>
<h3>Walking a folder</h3>
<p>Python has 2 stock implementations of a folder walker, each with its own features. A 3rd implementation is introduced here, with even more features: </p>
<pre class="fragment">subItems = folderPath.walk(isRecursive, wantFiles, wantFolders, followSymlinks=False, nameGlob="*", topDown=True)
</pre><p><code>subItems</code> will be a <code>list</code> of <code>FilePath</code>s and/or <code>FolderPath</code>s, depending on <code>wantFiles</code> and <code>wantFolders</code>.</p>
<h3>Temporary folders</h3>
<p>Temporary folders are the same as a <code>Local.FolderPath</code> above, with a pre-set folder name and path: </p>
<pre class="fragment">from Disk.TempFolder import TempFolderPath
folder = TempFolderPath()
</pre><h2>File objects</h2>
<p>File objects here are similar to the objects returned by python's built in <code>open()</code> function, but have some differences/improvements. Here are some examples: </p>
<pre class="fragment">from Disk import Local
file_ = Local.File("/path/to/file", "r")

if file_.isWritable():
    # determines if the file can be written to using the mode specified
if file_.isClosed():
    # do something
print(file_.getPath())

with file_:
    # use standard read/write methods here
with file_:
    # files can be reopened later, after being closed by the `with` statement above
</pre><h3>Temporary files</h3>
<p>Temporary files are the same as a <code>Local.File</code> above, except they have the option to be deleted when they are destructed. <code>NamedSecureTempFile</code> is basically a combination of python's built-in <code>tempfile.NamedTemporaryFile</code> and <code>tempfile.mkstemp</code>. </p>
<pre class="fragment">from Disk.TempFile import NamedSecureTempFile as TempFile
file_ = TempFile(delete=True)
with file_:
    # do something
file_.destruct()    # permanently closes the file, and possibly deletes it
</pre><h2>Remote files and folders using SSH</h2>
<p>There are identical <code>FilePath</code>, <code>FolderPath</code>, and <code>File</code> classes as mentioned above, but for SSH! Use them the same way. Also, these 3 classes can be mixed interchangably in arguments, so for example, a <code>Local.FilePath</code> can be copied to a <code>SSH.FilePath</code> using the same API: </p>
<pre class="fragment">from Disk import Local, SSH
source = Local.FilePath("path/to/file.txt")
dest = SSH.FilePath("remote/path/to/file.txt")
source.copy(dest)
</pre><h2>Improved ZipFile</h2>
<p>The built in python <code>ZipFile</code> module/class has a bug where unix chmod file attributes within the zip are not restored when unzipped. The new <code>ZipFile</code> module included here fixes that. </p>
<pre class="fragment">from Disk.CompressedFile import ZipFile
zipFile = ZipFile("path/to/myZippedFile.zip")
zipFile.extract(folder)
</pre><h2>Configuration file modifier</h2>
<p>This class has been designed to modify configuration files which have a list of key+value pairs in a certain format. This format includes most configuration files. </p>
<pre class="fragment">from Disk.ConfigFile import Parser_m1 as ConfigFile
ConfigFile.changeConfig(filePath, newLine, commentChar='#', assignChar=' ', sectionName=None, sectionMatch='[')
</pre><p><code>commentChar</code> is the character or string that is placed at the beginning of a comment in the config file <code>assignChar</code> is the character or string between the key and value. Sometimes this is an equals sign. <code>sectionName</code> should be used only if the config file has sections, ex. <code>[mysqld]</code>. <code>sectionMatch</code> is the beginning character/string before the <code>sectionName</code>. This is ignored if <code>sectionName</code> is <code>None</code>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Sep 3 2013 11:41:03 for py.Disk by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
